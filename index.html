<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>ì‚¬ë¸Œì‚¬ë¦¬ ì˜¤ëŠ˜ì˜ í–‰ìš´ë©”ì‹œì§€</title>
  <style>
    :root{
      --bg:#fff9fd;            /* ì•„ì£¼ ì—°í•œ í•‘í¬ ë² ì´ìŠ¤ */
      --card:#ffffff;          /* ì¹´ë“œ ë°°ê²½ */
      --ink:#333;              /* ë³¸ë¬¸ ìƒ‰ */
      --accent:#ff92c2;        /* ë”¸ê¸°ìš°ìœ  í¬ì¸íŠ¸ */
      --accent-2:#9ad8ff;     /* íŒŒìŠ¤í…” ë¸”ë£¨ */
      --muted:#888;           
      --radius:24px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: "Pretendard", system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 50% -10%, #ffe4f1 0%, var(--bg) 40%, var(--bg) 100%);
      color:var(--ink);
    }
    .wrap{max-width:480px; margin:0 auto; padding:20px 16px 40px}
    .card{
      background:var(--card); border-radius:var(--radius);
      box-shadow: 0 6px 20px rgba(255,146,194,.25);
      padding:20px; text-align:center;
    }
    .title{
      font-weight:800; font-size:22px; letter-spacing:-0.2px; margin:4px 0 8px;
    }
    .subtitle{color:#555; font-size:14px; margin:0 0 16px}
    .sabsari{
      width:180px; height:180px; object-fit:contain; display:block; margin:10px auto 6px;
      filter: drop-shadow(0 4px 10px rgba(0,0,0,.08));
      animation: float 3.2s ease-in-out infinite;
    }
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}

    .btn{
      width:100%; padding:14px 16px; border:none; border-radius:16px; font-weight:700; font-size:16px;
      background:linear-gradient(90deg, var(--accent), #ffc1dd);
      color:#fff; cursor:pointer; transition:.2s transform ease, .2s box-shadow ease;
      box-shadow: 0 6px 12px rgba(255,146,194,.35);
    }
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.6; cursor:not-allowed;}

    .gif-box{ display:none; margin-top:6px; }
    .gif-box img{ width:100%; border-radius:16px; }

    .result{ display:none; margin-top:16px; }
    .fortune{
      padding:18px; border-radius:16px; line-height:1.5; font-size:17px; font-weight:700;
      background: conic-gradient(from 180deg at 50% 50%, #fff 0 30%, #fff7fb 30% 60%, #eef8ff 60% 100%);
      border:1px dashed #ffd1e6;
    }
    .tip{ color:var(--muted); font-size:13px; margin-top:10px }

    .footer{ text-align:center; color:#999; font-size:12px; margin-top:18px }
    .chip{
      display:inline-block; padding:6px 10px; border-radius:999px; background:#fff0f6; color:#c43c7a; font-weight:700; font-size:12px; margin-bottom:6px;
      border:1px solid #ffd6e9;
    }
  </style>
</head>
<body>
  <!--
    âš™ï¸ ë°°í¬ ë©”ëª¨
    1) /assets/sabsari.png  : ì‚¬ë¸Œì‚¬ë¦¬ ì •ì§€ ì´ë¯¸ì§€ (ì‚¬ìš©ì ì œê³µ)
    2) /assets/fortune.gif  : 5ì´ˆ ì¬ìƒ GIF (ì‚¬ìš©ì ì œê³µ)
    3) ì•„ë˜ FORTUNE_MESSAGES ë°°ì—´ì— 100ê°œì˜ í–‰ìš´ë¬¸êµ¬ë¥¼ ë„£ìœ¼ì„¸ìš”.
       - ë‚˜ì¤‘ì— ë¶„ë¦¬í•˜ê³  ì‹¶ë‹¤ë©´ /assets/fortunes.js ë¡œ ì˜®ê¸°ê³  <script src="/assets/fortunes.js"></script> ë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ë©ë‹ˆë‹¤.
    4) "í•˜ë£¨ 1ê°œ ì œí•œ"ì€ ê¸°ê¸°/ë¸Œë¼ìš°ì € ê¸°ì¤€(ë¡œì»¬ ì €ì¥ì†Œ)ì…ë‹ˆë‹¤. ì„œë²„ë¥¼ ì“°ë©´ ì‚¬ìš©ì ê³„ì •/ì¿ í‚¤ë¡œ í™•ì¥ ê°€ëŠ¥.
  -->

  <div class="wrap">
    <div class="card" id="stage-welcome">
      <div class="chip">ì˜¤ëŠ˜ì˜ í–‰ìš´</div>
      <img id="sabsariImg" class="sabsari" src="/assets/sabsari.png" alt="ì‚¬ë¸Œì‚¬ë¦¬" />
      <h1 class="title">ì˜¤ëŠ˜ì˜ í–‰ìš´ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì¤„ê¹Œ?</h1>
      <p class="subtitle">ì‚¬ë¸Œì‚¬ë¦¬ê°€ ì‚´í¬ì‹œ ë³µì„ ê±´ë„¤ì¤„ ì¤€ë¹„ ì¤‘ì´ì—ìš”. (í•˜ë£¨ 1ë²ˆë§Œ!)</p>
      <button id="startBtn" class="btn">ë¶€íƒí•´!</button>
      <div class="gif-box" id="gifBox">
        <img id="fortuneGif" src="/assets/fortune.gif" alt="ì‚¬ë¸Œì‚¬ë¦¬ í–‰ìš´ GIF" />
      </div>
      <div class="result" id="resultBox">
        <div class="fortune" id="fortuneText">ì—¬ê¸°ì— í–‰ìš´ë©”ì‹œì§€ê°€ ë³´ì—¬ìš” âœ¨</div>
        <div class="tip" id="nextTip">ë‚´ì¼ ë˜ ë°›ìœ¼ëŸ¬ ì™€ì¤˜ìš” â™¡</div>
      </div>
    </div>

    <div class="footer">Â© Namusoo Design Â· Sabsari</div>
  </div>

  <script>
    // =========================
    // 1) í–‰ìš´ ë©”ì‹œì§€ ì €ì¥ ê³µê°„
    // =========================
    // ğŸ‘‰ ì—¬ê¸° ë°°ì—´ì— 100ê°œì˜ ë¬¸êµ¬ë¥¼ ë¬¸ìì—´ë¡œ ë„£ìœ¼ì„¸ìš”.
    //    ì˜ˆì‹œ 20ê°œë§Œ ì±„ì›Œë‘ì—ˆìŠµë‹ˆë‹¤. (ë°˜ë“œì‹œ 100ê°œë¡œ ëŠ˜ë ¤ ì‚¬ìš©)
    const FORTUNE_MESSAGES = [
      "ì˜¤ëŠ˜ì˜ ë„ˆ, ìƒê°ë³´ë‹¤ ë” ë¹›ë‚˜!",
      "ì‘ì€ ì‹œì‘ì´ í° í–‰ìš´ì„ ë¶ˆëŸ¬ì™€ìš”.",
      "ë„¤ê°€ í•œ ì¹œì ˆì´ ëŒì•„ì™€ ì¢‹ì€ ì†Œì‹ì´ ë  ê±°ì•¼.",
      "ê¸°ë‹¤ë¦¬ë˜ ì—°ë½ì´ ê³§ ë„ì°©!",
      "ê±±ì •ì˜ 80%ëŠ” ì¼ì–´ë‚˜ì§€ ì•Šì•„ìš”. ê°€ë³ê²Œ ê°€ì!",
      "ë„¤ ì„ íƒì´ ì •ë‹µ. ìì‹ ê° ìˆê²Œ Go!",
      "ì˜ì™¸ì˜ ê³³ì—ì„œ ì¹­ì°¬ì„ ë“£ê²Œ ë  ê±°ì˜ˆìš”.",
      "ì˜¤ëŠ˜ì€ í–‰ìš´ í¬ì¸íŠ¸ +1 ìŒ“ì´ëŠ” ë‚ !",
      "ìš°ì—°ì²˜ëŸ¼ ë³´ì¸ ë§Œë‚¨ì´ ê¸°íšŒê°€ ë  ê±°ì•¼.",
      "ë„¤ê°€ ì¢‹ì•„í•˜ëŠ” ìŒì•…ì´ ì¢‹ì€ íë¦„ì„ ë°ë ¤ì™€ìš”.",
      "ëˆ ëŒ€ì‹  ì‹œê°„ì„ ì•„ë¼ë©´ ëˆì´ ë”°ë¼ì™€ìš”.",
      "ì¢‹ì€ ì†Œì‹, ë‹¬ì½¤í•œ ê°„ì‹ì²˜ëŸ¼ ì°¾ì•„ì™€ìš”.",
      "ì˜¤ëŠ˜ì˜ í•œ ê±¸ìŒì´ ë‚´ì¼ì˜ ì í”„ê°€ ëœë‹¤!",
      "ë§ˆìŒì— ë“  ì•„ì´ë””ì–´, ì§€ê¸ˆ ì ì–´ë‘ê¸° âœï¸",
      "ì´ëª¨í‹°ì½˜ì²˜ëŸ¼ ë°˜ì§! í‘œì •ì´ í–‰ìš´ì„ ë¶€ë¥¸ë‹¤.",
      "ë„¤ê°€ ìƒìƒí•œ ê²ƒë³´ë‹¤ ê²°ê³¼ê°€ ë” ì¢‹ì•„ì§ˆ ê±°ì•¼.",
      "ì •ë¦¬ì •ëˆ 10ë¶„ = ë¨¸ë¦¿ì† ì—¬ìœ  1ì‹œê°„.",
      "í–‰ìš´ì€ ì¤€ë¹„ëœ ì‚¬ëŒì—ê²Œ ë¯¸ì†Œ ì§“ëŠ”ë‹¤ :) ",
      "ì‘ì€ ê°ì‚¬ ì¸ì‚¬ê°€ í° ë³µì„ ë°ë ¤ì™€ìš”.",
      "ì˜¤ëŠ˜ì˜ ìˆ˜ê³ ê°€ ê³§ ë³´ìƒìœ¼ë¡œ ëŒì•„ì™€ìš”.",
    ];

    // =========================
    // 2) í•˜ë£¨ 1ê°œ ì œí•œ ë¡œì§
    // =========================
    const KEY_DATE = 'sabsari_fortune_date';
    const KEY_TEXT = 'sabsari_fortune_text';

    // í˜„ì§€(ì¼ë³¸/í•œêµ­) ê¸°ì¤€ ë‚ ì§œ í‚¤ ë§Œë“¤ê¸°
    function todayKey(){
      try{
        // ì•„ì‹œì•„/ë„ì¿„ ê¸°ì¤€ (ì‚¬ìš©ì ìš”ì²­: ì¼ë³¸ ì²´ë¥˜)
        const fmt = new Intl.DateTimeFormat('ko-KR', { timeZone:'Asia/Tokyo', year:'numeric', month:'2-digit', day:'2-digit' });
        const parts = fmt.formatToParts(new Date());
        const y = parts.find(p=>p.type==='year').value;
        const m = parts.find(p=>p.type==='month').value;
        const d = parts.find(p=>p.type==='day').value;
        return `${y}-${m}-${d}`; // ì˜ˆ) 2025-09-18
      }catch(e){
        // ë¸Œë¼ìš°ì €ê°€ Intl ë¯¸ì§€ì›ì¼ ê²½ìš° ë¡œì»¬ ê¸°ì¤€ìœ¼ë¡œ ëŒ€ì²´
        const dt = new Date();
        const y = dt.getFullYear();
        const m = String(dt.getMonth()+1).padStart(2,'0');
        const d = String(dt.getDate()).padStart(2,'0');
        return `${y}-${m}-${d}`;
      }
    }

    function getSavedFortune(){
      const savedDate = localStorage.getItem(KEY_DATE);
      const savedText = localStorage.getItem(KEY_TEXT);
      const today = todayKey();
      if(savedDate === today && savedText){ return savedText; }
      return null;
    }

    function saveFortune(text){
      localStorage.setItem(KEY_DATE, todayKey());
      localStorage.setItem(KEY_TEXT, text);
    }

    // =========================
    // 3) UI í•¸ë“¤ëŸ¬
    // =========================
    const startBtn = document.getElementById('startBtn');
    const gifBox = document.getElementById('gifBox');
    const resultBox = document.getElementById('resultBox');
    const fortuneText = document.getElementById('fortuneText');

    // ì•± ì‹œì‘ ì‹œ: ì´ë¯¸ ì˜¤ëŠ˜ ë½‘ì•˜ë‹¤ë©´ ë°”ë¡œ ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
    window.addEventListener('DOMContentLoaded', () => {
      const already = getSavedFortune();
      if(already){
        fortuneText.textContent = already;
        resultBox.style.display = 'block';
        startBtn.disabled = true;
        document.getElementById('nextTip').textContent = 'ì˜¤ëŠ˜ì˜ í–‰ìš´ì€ ì´ë¯¸ ì „ë‹¬í–ˆì–´ìš” â™¡ ë‚´ì¼ ë‹¤ì‹œ ë§Œë‚˜ìš”!';
      }
    });

    startBtn.addEventListener('click', async () => {
      // ì¤‘ë³µ í´ë¦­ ë°©ì§€
      startBtn.disabled = true;

      // í˜¹ì‹œ ì´ë¯¸ ìˆìœ¼ë©´ ë°”ë¡œ ê²°ê³¼
      const saved = getSavedFortune();
      if(saved){
        fortuneText.textContent = saved;
        resultBox.style.display = 'block';
        return;
      }

      // 1) GIF ì¬ìƒ 5ì´ˆ ë…¸ì¶œ
      gifBox.style.display = 'block';

      await new Promise(r => setTimeout(r, 5000));

      // 2) ëœë¤ ë©”ì‹œì§€ ì„ íƒ (100ê°œ ì±„ì›Œ ë„£ìœ¼ë©´ 0~99 ë²”ìœ„)
      const pick = FORTUNE_MESSAGES[Math.floor(Math.random() * FORTUNE_MESSAGES.length)];

      // 3) ì €ì¥ + ê²°ê³¼ í‘œì‹œ
      saveFortune(pick);
      fortuneText.textContent = pick;
      resultBox.style.display = 'block';

      // 4) GIFëŠ” ê²°ê³¼ê°€ ë³´ì¼ ë•Œ ìì—°ìŠ¤ëŸ½ê²Œ ì ‘ê¸°
      gifBox.style.display = 'none';
    });
  </script>
</body>
</html>
